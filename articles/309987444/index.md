---
confluence-id: '309987444'
date: '2020-09-07T00:29:20.000+02:00'
last_modified_at: '2020-09-07T00:29:20.000+02:00'
layout: article
orig-title: How to adjust RX and TX ring sizes (queue lengths) of Ethernet interfaces
orig-title-slugified: how-to-adjust-rx-and-tx-ring-sizes-queue-lengths-of-ethernet-interfaces
permalink: /309987444/
published: 'true'
slug: '309987444'
tags: kb kbcore kbhowto kbethernet kbpacketloss kbcpu
title: How to adjust RX and TX ring sizes (queue lengths) of Ethernet interfaces
version: 8
---

<ac:layout><ac:layout-section ac:type="two_equal"><ac:layout-cell><ac:structured-macro ac:name="excerpt" ac:schema-version="1" ac:macro-id="2a6e168f-b284-4015-a70f-5110bdc4ede8"><ac:parameter ac:name="atlassian-macro-output-type">INLINE</ac:parameter><ac:rich-text-body><p>In high-load scenarios, you may need to increase to the size of RX and TX rings beyond the default settings (e.g. Ringsize_e1000_rx), and possibly also increase the total number of packet buffers in the system (Highbuffers).</p></ac:rich-text-body></ac:structured-macro><p><br /></p><p><ac:structured-macro ac:name="toc" ac:schema-version="1" ac:macro-id="b14ec6bf-c24f-4c52-ae96-1779f5f720df" /></p></ac:layout-cell><ac:layout-cell><ac:structured-macro ac:name="details" ac:schema-version="1" ac:macro-id="d6c80c04-42e9-45c0-8446-1df87ed8ca22"><ac:rich-text-body><table class="wrapped"><colgroup> <col /> <col /> </colgroup><tbody><tr><td><p>Up to date for</p></td><td><p>Core 12.00.19</p></td></tr><tr><td colspan="1">Status</td><td colspan="1"><div class="content-wrapper"><p><ac:structured-macro ac:name="status" ac:schema-version="1" ac:macro-id="471998ff-74aa-4084-a92e-47beddac7d93"><ac:parameter ac:name="colour">Yellow</ac:parameter><ac:parameter ac:name="title">DRAFT</ac:parameter></ac:structured-macro>&nbsp;<ac:structured-macro ac:name="status" ac:schema-version="1" ac:macro-id="47035ee4-0614-4a59-bce0-4a15bfd8dead"><ac:parameter ac:name="colour">Green</ac:parameter><ac:parameter ac:name="title">OK</ac:parameter></ac:structured-macro></p><p><ac:placeholder>DRAFT: still working on this </ac:placeholder></p><p><ac:placeholder>OK: usable (doesn't have to mean final!) </ac:placeholder></p><p><ac:placeholder>OLD: information is out of date </ac:placeholder></p><p><ac:placeholder>NEVERPUBLIC: never consider it for publication.</ac:placeholder></p></div></td></tr></tbody></table></ac:rich-text-body></ac:structured-macro></ac:layout-cell></ac:layout-section><ac:layout-section ac:type="single"><ac:layout-cell><h1>Suitable ring sizes for gigabit Ethernet interfaces</h1><p><ac:image ac:align="right"><ri:attachment ri:filename="changing-core-ringsize-settings.svg" /></ac:image></p><p>Adjust the right setting for your interface type, e.g. the &quot;Ringsize_e1000_...&quot; settings for e1000 interfaces.</p><p>An RX ring size of 1000 packets means that the system will tolerate up to 1 ms of delay between servicing the queues in a 1 MPPS scenario before losing packets.</p><h1>Increase number of system packet buffers if necessary</h1><p>In a 6-interface system, 1024 buffers on RX queues, and up to 1024 on TX queues when full, will consume (1024+1024)&nbsp; x 6 = 12288 packet buffers total.</p><p>The currently-allocated number is shown in the &quot;stats&quot; console command:</p><p><ac:image ac:height="149"><ri:attachment ri:filename="stats-command-with-buffers.png" /></ac:image></p><p>On this example E80, 24666 buffers are allocated by default, so 12288 is only about half of that, and the setting probably does not need to be increased - there's still 50% buffers available for other queues. Though if there is enough RAM available, it would certainly be advisable to increase the <strong>HighBuffers</strong> setting (first make it NOT dynamic!) to get the peak usage down to 25%, in order to leave room for packet queueing in other subsystems!</p><p>Use the <strong>mem</strong> console command to see how much free RAM there is. If there is not enough, the first thing to tune down is typically the maximum number of statefully-tracked connections - the <strong>MaxConnections</strong> setting.</p><p>After changing HighBuffers or MaxConnections, a core restart is needed (e.g &quot;shutdown 1&quot; on the console).</p></ac:layout-cell></ac:layout-section><ac:layout-section ac:type="single"><ac:layout-cell><h1>Related articles</h1><p><ac:structured-macro ac:name="contentbylabel" ac:schema-version="3" ac:macro-id="53a143b7-a3a9-4d49-b87e-330413001b82"><ac:parameter ac:name="sort">modified</ac:parameter><ac:parameter ac:name="excerptType">rich content</ac:parameter><ac:parameter ac:name="cql">label in (&quot;kbethernet&quot;,&quot;kbpacketloss&quot;) and type = &quot;page&quot;</ac:parameter></ac:structured-macro> <ac:placeholder> Change labels here to match suitably narrow labels, e.g. &quot;kbdhcp, kbrouting&quot; but not &quot;kbcore&quot;/&quot;kbhowto&quot;/&quot;kb&quot;. ALL labels listed will be shown, it's _not_ a &quot;must match all&quot; filter. </ac:placeholder></p><p><br /></p><p><br /></p></ac:layout-cell></ac:layout-section></ac:layout>